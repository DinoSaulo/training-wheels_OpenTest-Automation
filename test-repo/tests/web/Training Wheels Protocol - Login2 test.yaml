description: |
  Navigate in the Training Wheels Protocol website and test the login2 feature
actors:
  - actor: ACTOR1
    segments:
      - segment: 1
        actions:
          - description: Navigate to the Training Wheels Protocol homepage
            action: org.getopentest.selenium.NavigateTo
            args:
              url: https://training-wheels-protocol.herokuapp.com/

          - description: Click the login2 link in the page
            action: org.getopentest.selenium.Click
            args:
              locator: {css: "a[href='/login2']"}

          - description: Typing correct login
            action: org.getopentest.selenium.SendKeys
            args:
              locator: { id: userId }
              text: stark

          - description: Typing correct password
            action: org.getopentest.selenium.SendKeys
            args:
              locator: { id: passId }
              text: jarvis!

          - description: Fill in the input according to the requested data
            action: org.getopentest.selenium.ExecuteScript
            args:
              script: |
                const requested_data = document.getElementsByName("bday")[0].id;
                if(requested_data == 'day') document.getElementById("day").value = "29";
                else if(requested_data == 'month') document.getElementById("month").value = "05";
                else if(requested_data == 'year') document.getElementById("year").value = "1970";

          - description: Click in the Login button
            action: org.getopentest.selenium.Click
            args:
              locator: { css: "button[class*='btn-login']" }

          - description: Validate that user loged message is displayed
            action: org.getopentest.selenium.AssertElementText
            args:
              locator: { id: "flash" }
              textContains: "Olá, Tony Stark. Você acessou a área logada!"

          - description: Verify that message is displayed in green
            action: org.getopentest.selenium.AssertElementHasClass
            args:
              locator: { id: flash }
              class: success

          - description: Click the logout button
            action: org.getopentest.selenium.Click
            args:
              locator: {css: "a[href='/logout2']"}

          - description: Validate that logout message is displayed
            action: org.getopentest.selenium.AssertElementText
            args:
              locator: { id: "flash" }
              textContains: "Você saiu da área logada!"

          - description: Verify that message is displayed in green
            action: org.getopentest.selenium.AssertElementHasClass
            args:
              locator: { id: flash }
              class: success